from NetworkManagement.Domain.AnalyseWPinterface import AnalyseWPInterface
from NetworkManagement.Infraestructure.AnalyseWPRepository import AnalyseWPRepository
from Shared.Infrastructure.Postgres.PostgresConnection import PostgresConnection


class AnalyseWP:
    def __init__(self, analyseWP: AnalyseWPInterface, repository: AnalyseWPRepository,
                 db_connection: PostgresConnection):
        self.analyseWP = analyseWP
        self.repository = repository
        self.db_connection = db_connection

    def execute(self, domain: str):
        cleaned_data = self.analyseWP.analyse(domain)
        self.repository.save(cleaned_data, self.db_connection)
