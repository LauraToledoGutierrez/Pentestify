import subprocess
import tempfile


class Autonmap:
    def minimal(ip):
        # if not os.path.exists("/tmp/reports/xml_nmap"):
        #     os.mkdir("/tmp/reports/xml_nmap")
        ruta = tempfile.mktemp(suffix=".xml")
        print(f"Realizando escaneo de nmap para {ip}...")
        result = subprocess.run(
            ["nmap", ip, "-sV", "-version-light", "-p", "1-1000", "-oX", ruta])

        if result.returncode == 0:
            print(
                f"El escaneo se ha completado con Ã©xito y se ha guardado en {ruta}")
        else:
            print("Hubo un error al ejecutar el escaneo de nmap.")

        return result, ruta
